<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
    /* The switch - the box around the slider */

    </style>
    <title>Gentelella Alela! | </title>

    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- Animate.css -->
    <link href="../vendors/animate.css/animate.min.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">
  </head>

  <body class="login">
    <div>
      <a class="hiddenanchor" id="signup"></a>
      <a class="hiddenanchor" id="signin"></a>

      <div class="login_wrapper">
        <div class="animate form login_form">
          <section class="login_content">
            <form>
              <h1>Login Form</h1>
              <div>
                <input type="text" class="form-control" placeholder="Username" required="" />
              </div>
              <div>
                <input type="password" class="form-control" placeholder="Password" required="" />
              </div>
              <div>
                <input type="password" class="form-control" placeholder="Password" required="" />
              </div>
              <div>
                <a class="btn btn-default submit" href="index.html">Log in</a>
                <a class="reset_pass" href="#">Lost your password?</a>
              </div>

              <div class="clearfix"></div>

              <div class="separator">
                <p class="change_link">New to site?
                  <a href="#signup" class="to_register"> Create Account </a>
                </p>

                <div class="clearfix"></div>
                <br />

                <div>
                  <h1><i class="fa fa-paw"></i> Gentelella Alela!</h1>
                  <p>©2016 All Rights Reserved. Gentelella Alela! is a Bootstrap 3 template. Privacy and Terms</p>
                </div>
              </div>
            </form>
          </section>
        </div>

        <div id="register" class="animate form registration_form">
          <section class="login_content">
            <form>
              <h1>Create Account</h1>
              <div>
                <input id="appName" type="text" class="form-control" placeholder="Application Name" required="" />
              </div>
              <div>
                <input id="ipver4" type="text" class="form-control" placeholder="Application IPv4" required="" />
              </div>
              <div>
                <input id="ipver6" type="text" class="form-control" placeholder="Application IPv6" required="" />
              </div>
              <div>
                <input id="clientEmail" type="text" class="form-control" placeholder="pplication Manager Email" required="" />
              </div>
              <div>
                <input id="description" type="text" class="form-control" placeholder="Description" required="" />
              </div>

              <div style="position: relative; height: 54px; width: 260px ">
                <input id="clientID" type="text" style="width: 260px;" class="form-control" placeholder="Application Manager ID" required="" />
                <a id="checkid" class="btn btn-default" style="position: relative; left: 190px; top: -63px;">ID Check</a>
              </div>


              <div style="padding-bottom: 13px; position: relative;">
                <p class="form-control" style="text-align: left;">System Notification <input id="sbtn_notification" style="position: relative; left: 190px; top: 0px;" type="checkbox"/></p>
              </div>

              <div style="padding-bottom: 15px;">
                <select id="type" name="Application Type" class="form-control">
                  <option value="Network Control">Network Control</option>
                  <option value="Telephony">Telephony</option>
                  <option value="Multimedia Conferencing">Multimedia Conferencing</option>
                  <option value="Real-Time Interactive">Real-Time Interactive</option>
                  <option value="Multimedia Streaming">Multimedia Streaming</option>
                  <option value="Broadcast Video">Broadcast Video</option>
                  <option value="Low-Latency Data">Low-Latency Data</option>
                  <option value="OAM">OAM</option>
                  <option value="High-Throughput Data">High-Throughput Data</option>
                  <option value="Standard">Standard</option>
                  <option value="Low-Priority">Low-Priority</option>
                </select>
              </div>
              <div>
                <a id="submitdata" class="btn btn-default submit">Submit</a>
              </div>

              <div class="clearfix"></div>

              <div class="separator">
                <p class="change_link">Already a member ?
                  <a href="#signin" class="to_register"> Log in </a>
                </p>

              </div>
            </form>
          </section>
        </div>
      </div>
    </div>
    <!-- jQuery -->
    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript">
          var appProf = {
		    		appName:'PNU Tube',
		    		ipver4:'255.255.255.255',
		    		ipver6:'255.255.255.255.255.255',
		    		description:'동영상 스트리밍 애플리케이션입니다.',
		    		clientID:'selab',
		    		clientEmail:'selab@pusan.ac.kr',
		    		sbtn_notification:true,
            type:'Network Control'
		    	};
          for (var key in appProf) {
              if (key == "sbtn_notification") {
                if ($('#'+key).prop('checked')) {
                  $('#'+key).prop('checked', appProf[key]);
                }else {
                  $('#'+key).prop('checked', appProf[key]);
                }
              }else {
                $('#'+key).val(appProf[key]);
              }
          }
          $('#submitdata').on("click", function(e) {
            for (var key in appProf) {
                if (key == "sbtn_notification") {
                  appProf[key] = $('#'+key).prop('checked')
                }else {
                  appProf[key] = $('#'+key).val();
                }
            }
            console.log(appProf);
            if (document.getElementById('clientID').readOnly) {
              jQuery.ajax({
                method: 'post',
                url:'http://localhost:8080/Application/registprofile',
                data: appProf,
                config: 'Content-Type: application/json;'
              }).then(function (response) {
                  console.log(response);
                  window.location.href = 'http://localhost:8080/pages/dashboard.html';
              }, function (response) {
                  console.log(response);
              });
            }else {
              window.alert('아이디 중복확인 후 선택해주세요!')
            }
          })
          $('#checkid').on("click", function(e) {
            console.log('check id.. from server db')
            console.log(appProf.clientID)
            console.log('http://localhost:8080/Application/'+appProf.clientID);
            jQuery.ajax({
              method  : 'GET',
              url     : 'http://localhost:8080/Application/'+appProf.clientID
            }).then(function successCallback(response) {
              console.log('success');
              console.log(response.data);
              if (response.data == 'ture'){
                //DB에 데이터가 있는 경우,
                window.alert('아이디가 존재합니다.')
              }else {
                //DB에 데이터가 없는 경우,
                if (window.confirm('아이디가 존재 하지 않습니다. 이 아이디로 하시겠습니까?')) {
                  document.getElementById('clientID').readOnly = true
                  document.getElementById('clientID').style.color = 'gray'
                }
              }
            }, function errorCallback(response) {
              console.log('error occuring');
              console.log(response);
            });
          })
    </script>
  </body>
</html>
