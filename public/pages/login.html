<!DOCTYPE html>
<html lang="ko ng-app">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
    /* The switch - the box around the slider */

    </style>
    <title>Gentelella Alela! | </title>

    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- Animate.css -->
    <link href="../vendors/animate.css/animate.min.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="../build/css/custom.min.css" rel="stylesheet">
  </head>

  <body class="login" ng-app="LoginApp" ng-cloak="" >
    <div>
      <a class="hiddenanchor" id="signup"></a>
      <a class="hiddenanchor" id="signin"></a>

      <div class="login_wrapper">
        <div class="animate form login_form"  ng-controller="LoginCtrl">
          <section class="login_content">
            <form>
              <h1>NSAF Login</h1>
              <div>
                <input type="text" class="form-control" placeholder="E-mail" required="" />
              </div>
              <div>
                <input type="password" class="form-control" placeholder="Password" required="" />
              </div>
              <div>
                <a class="btn btn-default submit btn-lg" href="index.html">Log in</a>
                <!-- <a class="reset_pass" href="#">Lost your password?</a> -->
              </div>

              <div class="clearfix"></div>

              <div class="separator">
                <p class="change_link">
                  <a href="#signup" class="to_register"> Create Account </a>
                </p>

                <div class="clearfix"></div>
                <br />

                <div>
                  <p>©2017 All Rights Reserved. PNU SELAB.</p>
                </div>
              </div>
            </form>
          </section>
        </div>

        <div id="register" class="animate form registration_form" ng-controller="AccountCtrl">
          <section class="login_content">
            <form>
              <h1>Create Account</h1>
              <div style="position: relative; height: 54px; width: 260px ">
                <input type="email" style="width: 260px;" class="form-control" placeholder="Application Manager ID" required="" ng-model="appProf.clientEmail" name="clientEmail"/>
                <a id="checkid" class="btn btn-default" style="position: relative; left: 190px; top: -63px;">ID Check</a>
              </div>
              <div>
                <input type="text" class="form-control" placeholder="Application Name" required="" ng-model="appProf.appName" name="appName"/>
              </div>
              <div>
                <input type="text" class="form-control" placeholder="Application IPv4" required="" ng-model="appProf.ipver4" name="ipver4"/>
              </div>
              <div>
                <input type="text" class="form-control" placeholder="Application IPv6" required="" ng-model="appProf.ipver6" name="ipver6"/>
              </div>
              <div style="padding-bottom: 13px; position: relative;">
                <select class="form-control" required="" ng-model="appProf.appType" name="appType">
                  <option value="">---Please select---</option> <!-- not selected / blank option -->
                  <option ng-repeat="item in appTypeList" value="{{item.id}}">{{item.name}}</option>
                </select>
              </div>
              <div>
                <input type="text" class="form-control" placeholder="Description" required="" ng-model="appProf.description" name="description"/>
              </div>
              <div>
                <input type="button" class="btn btn-default" value="Account" ng-click="appAcccount()"></input>
                <!-- <a id="submitdata" class="btn btn-default submit">Submit</a> -->
              </div>

              <div class="clearfix"></div>

              <div class="separator">
                <p class="change_link">Already a member ?
                  <a href="#signin" class="to_register"> Log in </a>
                </p>

              </div>
            </form>
          </section>
        </div>
      </div>
    </div>
    <!-- jQuery -->
    <script src="../vendors/jquery/dist/jquery.min.js"></script>
    <!-- Angular Library -->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script>
    <script src="https://cdn.rawgit.com/angular-ui/bower-ui-grid/master/ui-grid.min.js"></script>
    <!-- Angular Material Library -->
    <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>
    <script type="text/javascript">
       angular.module('LoginApp',['ngMaterial'])
        .controller('LoginCtrl', function($scope, $http) {
            
        })
        .controller('AccountCtrl', function($scope, $http) {
          $scope.appProf={
            clientEmail:'selab@pusan.ac.kr',
            appName:'PNU Tube',
            ipver4:'255.255.255.255',
            ipver6:'255.255.255.255.255.255',
            appType:'',
            description:'동영상 스트리밍 애플리케이션입니다.'
          };

          $scope.appTypeList=[
            { id:'appType1' , name:'Network Control' },
            { id:'appType2' , name:'Telephony' },
            { id:'appType3' , name:'Signaling' },
            { id:'appType4' , name:'Multimedia Conferencing' },
            { id:'appType5' , name:'Real-Time Interactive' },
            { id:'appType6' , name:'Multimedia Streaming' },
            { id:'appType7' , name:'Broadcast Video' },
            { id:'appType8' , name:'Low-Latency Data' },
            { id:'appType9' , name:'OAM' },
            { id:'appType10' , name:'High-Throughput Data' },
            { id:'appType11' , name:'Standard' },
            { id:'appType12' , name:'Low-Priority' }
          ];

          $scope.appAcccount = function(){
            console.log($scope.appProf);
            $http({
              method: 'POST',
              url:'http://localhost:8080/Application',
              data: $scope.appProf,
              config: 'Content-Type: application/json;'
            }).then(function (response) {
                console.log(response);
                //$window.location.href = 'http://localhost:8080/pages/dashboard.html';
            }, function (response) {
                console.log(response);
            });
          };
        });
    </script>

    <script type="text/javascript">
          /*var appProf = {
		    		appName:'PNU Tube',
		    		ipver4:'255.255.255.255',
		    		ipver6:'255.255.255.255.255.255',
		    		description:'동영상 스트리밍 애플리케이션입니다.',
		    		clientID:'selab',
		    		clientEmail:'selab@pusan.ac.kr',
		    		sbtn_notification:true,
            type:'Network Control'
		    	};
          for (var key in appProf) {
              if (key == "sbtn_notification") {
                if ($('#'+key).prop('checked')) {
                  $('#'+key).prop('checked', appProf[key]);
                }else {
                  $('#'+key).prop('checked', appProf[key]);
                }
              }else {
                $('#'+key).val(appProf[key]);
              }
          }
          $('#submitdata').on("click", function(e) {
            for (var key in appProf) {
                if (key == "sbtn_notification") {
                  appProf[key] = $('#'+key).prop('checked')
                }else {
                  appProf[key] = $('#'+key).val();
                }
            }
            console.log(appProf);
            if (document.getElementById('clientID').readOnly) {
              jQuery.ajax({
                method: 'post',
                url:'http://localhost:8080/Application/registprofile',
                data: appProf,
                config: 'Content-Type: application/json;'
              }).then(function (response) {
                  console.log(response);
                  window.location.href = 'http://localhost:8080/pages/dashboard.html';
              }, function (response) {
                  console.log(response);
              });
            }else {
              window.alert('아이디 중복확인 후 선택해주세요!')
            }
          })
          $('#checkid').on("click", function(e) {
            console.log('check id.. from server db')
            console.log(appProf.clientID)
            console.log('http://localhost:8080/Application/'+appProf.clientID);
            jQuery.ajax({
              method  : 'GET',
              url     : 'http://localhost:8080/Application/'+appProf.clientID
            }).then(function successCallback(response) {
              console.log('success');
              console.log(response.data);
              if (response.data == 'ture'){
                //DB에 데이터가 있는 경우,
                window.alert('아이디가 존재합니다.')
              }else {
                //DB에 데이터가 없는 경우,
                if (window.confirm('아이디가 존재 하지 않습니다. 이 아이디로 하시겠습니까?')) {
                  document.getElementById('clientID').readOnly = true
                  document.getElementById('clientID').style.color = 'gray'
                }
              }
            }, function errorCallback(response) {
              console.log('error occuring');
              console.log(response);
            });
          })*/
    </script>
  </body>
</html>
